<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>세븐나이츠 리버스 스타 길드</title>
  <style>
    /* 전체 스타일 */
    body{
      font-family:'Noto Sans KR', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background-color:#2b2f36;
      margin:0; padding:20px;
      display:flex; justify-content:center; align-items:center; flex-direction:column;
    }

    /* ⭐ 최상단 배너 (반짝이는 별) */
    .banner{
      position:relative;
      width:100%; max-width:800px; margin-bottom:10px;
      border-radius:15px; overflow:hidden;
      background:
        radial-gradient(1200px 400px at 10% -20%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 360px at 90% -10%, rgba(102,217,232,.30), transparent 60%),
        linear-gradient(135deg, #7c3aed, #66d9e8);
      color:#fff; text-align:center;
      box-shadow:0 4px 16px rgba(0,0,0,.15);
    }
    .banner-inner{ position:relative; z-index:1; padding:38px 20px 42px; }
    .logo{ display:inline-flex; gap:10px; align-items:center; }
    .logo-star{ width:42px; height:42px; color:#ffd166; filter:drop-shadow(0 4px 10px rgba(0,0,0,.25)); }
    .title-text{ font-size:28px; font-weight:900; letter-spacing:-.4px; }
    .title-text .title-star{ color:#ffd166; text-shadow:0 1px 0 rgba(0,0,0,.2); }
    .tagline{ margin-top:6px; color:rgba(255,255,255,.9); font-size:14px; }

    /* 배너 별 배경 */
    .stars{ position:absolute; inset:0; opacity:.6; z-index:0; }
    .stars use{ opacity:.5; animation:twinkle 6s ease-in-out infinite; }
    .stars use:nth-child(3n){ animation-duration:7.5s }
    .stars use:nth-child(4n){ animation-duration:9s }
    @keyframes twinkle{ 0%,100%{opacity:.25} 50%{opacity:.95} }

    /* 배너 하단 크레딧(배너 밖에 렌더) */
    .banner-credit--outside{
      position:static;
      transform:none;
      pointer-events:auto;
      margin:6px 0 12px;
      color:rgba(255,255,255,.8);
      text-shadow:none;
      text-align:center;
      font-size:12px;
      letter-spacing:.2px;
    }

    /* 링크 기본 제거 */
    a{ text-decoration:none; color:inherit; }

    /* ====== 메인 메뉴 타일 ====== */
    .menu-container{
      display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
      gap:20px; width:100%; max-width:800px;
    }
    .menu-item{
      --mx:50%; --my:50%;
      --accent:#66d9e8;
      position:relative;
      display:flex; align-items:center; gap:14px;
      background:linear-gradient(180deg,#ffffff,#f4f6fa);
      border:1px solid rgba(0,0,0,.06);
      padding:22px 22px 22px 18px;
      border-radius:22px;
      color:#1f2937;
      box-shadow:0 6px 14px rgba(0,0,0,.12);
      transition:transform .18s, box-shadow .18s, border-color .18s, background .18s;
      cursor:pointer;
      overflow:hidden;
      isolation:isolate;
    }
    .menu-item::before{
      content:""; position:absolute; left:0; top:14px; bottom:14px; width:6px;
      border-radius:10px;
      background:linear-gradient(180deg, var(--accent), #22b8cf);
      opacity:.9;
    }
    .menu-item::after{
      content:""; position:absolute; inset:-1px;
      background:
        radial-gradient(180px 120px at var(--mx) var(--my), rgba(102,217,232,.14), transparent 60%),
        linear-gradient(180deg, transparent, rgba(255,255,255,.06));
      pointer-events:none; z-index:0; opacity:.7; transition:opacity .2s;
    }
    .menu-item .shine{
      position:absolute; inset:-1px; z-index:0;
      background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.35) 20%, transparent 40%);
      transform:translateX(-150%); transition:transform .6s ease;
    }
    .menu-item:hover .shine{ transform:translateX(150%); }
    .menu-item:hover{ transform:translateY(-4px); box-shadow:0 12px 22px rgba(0,0,0,.22); border-color:var(--accent); }
    .menu-item .icon{ width:34px; height:34px; flex-shrink:0; color:var(--accent); filter:drop-shadow(0 2px 4px rgba(0,0,0,.15)); z-index:1; }
    .menu-item .text{ z-index:1; }
    .menu-item .title{ font-size:1.15em; font-weight:900; line-height:1.1; }
    .menu-item .sub{ margin-top:2px; font-size:.88em; color:#4b5563; }

    .menu-item.war{ --accent:#f97316; }
    .menu-item.siege{ --accent:#60a5fa; }
    .menu-item.checkin{ --accent:#22c55e; }
    .disabled{ opacity:.55; pointer-events:none; }

    /* ====== 뷰 전환 섹션 ====== */
    .view{ width:100%; max-width:800px; display:none; }
    .view.active{ display:block; }

    /* 공성전 가이드 내부 */
    .topbar{ display:flex; gap:10px; align-items:center; margin-bottom:16px; }
    .btn{
      display:inline-block; padding:10px 14px; font-weight:700;
      background:#0e1523; color:#e6eaf0; border-radius:12px; border:1px solid rgba(0,0,0,.08);
      box-shadow:0 2px 6px rgba(0,0,0,.12);
    }
    .btn:hover{ filter:brightness(1.05); }

    .page-title{ font-size:22px; font-weight:900; color:#eef2f7; margin:10px 0 16px; }

    .day-grid{
      display:grid; grid-template-columns:repeat(auto-fit, minmax(160px,1fr));
      gap:12px;
    }
    .day-card{
      display:block; text-align:center; font-weight:800;
      background:linear-gradient(180deg,#ffffff,#f7f9fc);
      color:#2a2f36;
      border:1px solid rgba(0,0,0,.06);
      border-radius:16px; padding:18px;
      box-shadow:0 6px 12px rgba(0,0,0,.08);
      transition:transform .15s, box-shadow .15s, border-color .15s;
      position:relative;
    }
    .day-card::after{
      content:"→"; position:absolute; right:14px; top:50%; transform:translateY(-50%);
      opacity:.35; font-weight:900;
    }
    .day-card:hover{
      transform:translateY(-3px);
      box-shadow:0 10px 18px rgba(0,0,0,.16);
      border-color:#66d9e8;
    }

    /* 빌드 칩 */
    .chips{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .chip{
      display:inline-block; padding:8px 12px; font-weight:800; font-size:13px;
      background:#0e1523; color:#e6eaf0; border:1px solid rgba(255,255,255,.08);
      border-radius:9999px; box-shadow:0 2px 6px rgba(0,0,0,.12);
    }
    .chip:hover{ filter:brightness(1.1); }
    .build-switch{ display:flex; gap:8px; margin:0 0 12px; }
    .build-switch .chip{ background:#0f172a; color:#e2e8f0; border-color:rgba(255,255,255,.08); }
    .build-switch .chip.active{ background:#22b8cf; color:#0b1320; border-color:transparent; }

    .day-title{ font-size:20px; font-weight:900; color:#eef2f7; margin:10px 0 12px; }
    .content-box{
      background:linear-gradient(180deg,#ffffff,#f7f9fc);
      color:#1f2937;
      border:1px solid rgba(0,0,0,.06);
      border-radius:16px; padding:18px;
      box-shadow:0 6px 12px rgba(0,0,0,.08);
    }

    /* 공용 푸터 */
    .site-footer{
      margin-top:18px;
      text-align:center;
      color:rgba(255,255,255,.75);
      font-size:12px;
    }

    /* 개발자노트 위젯 */
    .devnote-widget{
      width:100%; max-width:800px; margin:12px 0 18px;
    }
    .devnote-row{
      display:flex; justify-content:space-between; gap:10px; padding:8px 0;
      border-top:1px dashed #cbd5e1;
    }
    .devnote-title{ font-weight:800; color:#0e1523; }
    .devnote-date{ color:#94a3b8; white-space:nowrap; }
    .devnote-meta{ margin-top:8px; font-size:12px; color:#94a3b8; }
  </style>
</head>
<body>

  <!-- 배너 -->
  <div class="banner">
    <svg class="stars" viewBox="0 0 1200 260" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <symbol id="s-star" viewBox="0 0 24 24">
          <path d="M12 2.2l2.9 6 6.6 1-4.8 4.6 1.1 6.5L12 17.9 6.2 20.3l1.1-6.5-4.8-4.6 6.6-1L12 2.2z" fill="white"/>
        </symbol>
      </defs>
      <use href="#s-star" x="80"  y="40"  width="12" height="12"/>
      <use href="#s-star" x="210" y="90"  width="16" height="16"/>
      <use href="#s-star" x="380" y="30"  width="10" height="10"/>
      <use href="#s-star" x="560" y="70"  width="14" height="14"/>
      <use href="#s-star" x="740" y="20"  width="11" height="11"/>
      <use href="#s-star" x="930" y="80"  width="15" height="15"/>
      <use href="#s-star" x="1080" y="40" width="12" height="12"/>
      <use href="#s-star" x="160" y="170" width="11" height="11"/>
      <use href="#s-star" x="460" y="190" width="14" height="14"/>
      <use href="#s-star" x="780" y="165" width="11" height="11"/>
      <use href="#s-star" x="1030" y="190" width="13" height="13"/>
    </svg>

    <div class="banner-inner">
      <div class="logo">
        <svg class="logo-star" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2l3.09 6.26L22 9.27l-5 4.88L18.2 22 12 18.6 5.8 22l1.2-7.85-5-4.88 6.91-1.01L12 2z"/></svg>
        <span class="title-text">세븐나이츠 리버스 <span class="title-star">스타</span> 길드</span>
        <svg class="logo-star" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2l3.09 6.26L22 9.27l-5 4.88L18.2 22 12 18.6 5.8 22l1.2-7.85-5-4.88 6.91-1.01L12 2z"/></svg>
      </div>
      <div class="tagline">길드 관련 정보 모음</div>
    </div>
  </div>

  <!-- 배너 바로 아래 크레딧 -->
  <div class="banner-credit--outside">Made by 우타</div>

  <!-- 최신 개발자노트 위젯 -->
  <div id="devnote-widget" class="content-box devnote-widget" aria-live="polite">
    <div style="font-weight:900; margin-bottom:8px;">최신 개발자노트</div>
    <div id="devnote-list" style="color:#64748b">불러오는 중...</div>
  </div>

  <!-- 뷰: 메인 -->
  <section id="view-home" class="view active">
    <div class="menu-container">
      <a href="https://docs.google.com/spreadsheets/d/1zbdM9yozbwejCFWwrFac724VeQdBfeGF7nyrWCmO2TQ/edit?usp=sharing" rel="noopener">
        <div class="menu-item war" data-tile="war">
          <div class="shine"></div>
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7.1 2l2.8 2.8-1.4 1.4L5.7 3.4 4.3 4.8l2.8 2.8-1.4 1.4L2.9 6.2 2 7.1l5.7 5.7-1.4 1.4L.6 8.6 2 7.1 3.4 5.7l-2-2L3.7 1l2 2L7.1 2zm9.8 20l-2.8-2.8 1.4-1.4 2.8 2.8 1.4-1.4-2.8-2.8 1.4-1.4 2.8 2.8.9-.9-5.7-5.7 1.4-1.4 7.7 7.7-1.4 1.4-1.4 1.4 2 2-2.3 2.3-2-2-.9.9zM8.6 8.6l6.8 6.8-1.4 1.4-6.8-6.8 1.4-1.4z"/></svg>
          <div class="text"><div class="title">길드전 가이드</div><div class="sub">추천 전술</div></div>
        </div>
      </a>

      <a href="#/siege">
        <div class="menu-item siege" data-tile="siege">
          <div class="shine"></div>
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 3h4v3h2V3h4v3h2V3h4v18H4V3zm2 8h12v8H6v-8zm2 2v4h2v-4H8zm6 0v4h2v-4h-2z"/></svg>
          <div class="text"><div class="title">공성전 가이드</div><div class="sub">요일별 루트 · 영웅 공략</div></div>
        </div>
      </a>

      <a href="https://skre-shop.netmarble.com/event/daily_gift" target="_blank" rel="noopener">
        <div class="menu-item checkin" data-tile="checkin">
          <div class="shine"></div>
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20 7h-2.1c.4-.5.6-1.1.6-1.8C18.5 3.6 17 2 15.2 2c-1.4 0-2.6.9-3.2 2.1C11.4 2.9 10.2 2 8.8 2 7 2 5.5 3.6 5.5 5.2c0 .7.2 1.3.6 1.8H4v4h2v9h6v-9h2v9h6v-9h2V7h-2zm-8-2c.6-1 1.6-1.3 2.3-1.3.8 0 1.7.7 1.7 1.5S14.5 7 13.7 7H12V5zm-2 2H8.3C7.5 7 6.5 6.4 6.5 5.6S7.4 4 8.2 4C8.9 4 10 4.6 10.6 6V7z"/></svg>
          <div class="text"><div class="title">웹사이트 출석체크</div><div class="sub">일일 보상받기</div></div>
        </div>
      </a>

      <a href="#"><div class="menu-item disabled"><div class="text"><div class="title">준비중</div></div></div></a>
      <a href="#"><div class="menu-item disabled"><div class="text"><div class="title">준비중</div></div></div></a>
      <a href="#"><div class="menu-item disabled"><div class="text"><div class="title">준비중</div></div></div></a>
    </div>
  </section>

  <!-- 뷰: 공성전 가이드 (요일 선택) -->
  <section id="view-siege" class="view">
    <div class="topbar">
      <a class="btn" href="#/">← 메인으로</a>
    </div>
    <div class="page-title">공성전 가이드</div>
    <div class="day-grid">

      <!-- 월요일 + 빌드 칩 -->
      <a class="day-card" href="#/siege/mon">월요일(루디)</a>
      <div class="chips">
        <a class="chip" href="#/siege/mon/a">기본 빌드</a>
        <a class="chip" href="#/siege/mon/b">대체 빌드</a>
      </div>

      <!-- 화요일 + 빌드 칩 -->
      <a class="day-card" href="#/siege/tue">화요일(아일린)</a>
      <div class="chips">
        <a class="chip" href="#/siege/tue/a">기본 빌드</a>
        <a class="chip" href="#/siege/tue/b">대체 빌드</a>
      </div>

      <!-- 수요일 + 빌드 칩(이름 지정) -->
      <a class="day-card" href="#/siege/wed">수요일(레이첼)</a>
      <div class="chips">
        <a class="chip" href="#/siege/wed/van">바네사 빌드</a>
        <a class="chip" href="#/siege/wed/bis">비스킷 빌드</a>
      </div>

      <!-- 목요일 + 빌드 칩 -->
      <a class="day-card" href="#/siege/thu">목요일(델론즈)</a>
      <div class="chips">
        <a class="chip" href="#/siege/thu/a">기본 빌드</a>
        <a class="chip" href="#/siege/thu/b">대체 빌드</a>
      </div>

      <!-- 금요일 + 빌드 칩 -->
      <a class="day-card" href="#/siege/fri">금요일(제이브)</a>
      <div class="chips">
        <a class="chip" href="#/siege/fri/a">기본 빌드</a>
        <a class="chip" href="#/siege/fri/b">대체 빌드</a>
      </div>

      <!-- 토요일 + 빌드 칩 -->
      <a class="day-card" href="#/siege/sat">토요일(스파이크)</a>
      <div class="chips">
        <a class="chip" href="#/siege/sat/a">기본 빌드</a>
        <a class="chip" href="#/siege/sat/b">대체 빌드</a>
      </div>

      <!-- 일요일 + 빌드 칩 -->
      <a class="day-card" href="#/siege/sun">일요일(크리스)</a>
      <div class="chips">
        <a class="chip" href="#/siege/sun/a">기본 빌드</a>
        <a class="chip" href="#/siege/sun/b">대체 빌드</a>
      </div>

    </div>
  </section>

  <!-- 뷰: 요일 상세 -->
  <section id="view-day" class="view">
    <div class="topbar">
      <a class="btn" href="#/siege">← 공성전 가이드로</a>
      <a class="btn" href="#/">← 메인으로</a>
    </div>
    <div class="day-title" id="day-title">월요일</div>
    <div class="content-box" id="day-content"></div>
  </section>

  <!-- 공용 푸터 (모든 뷰에서 항상 보임) -->
  <footer class="site-footer">
    정보 공유 - 뀨니, 빈닝 님 감사합니다
  </footer>

  <script>
    /* ===== 상수: 개발자노트 API 엔드포인트 =====
       - 같은 서버에 /data/devnotes.json 파일을 두면 CORS 이슈 없이 동작합니다.
       - 서버리스 프록시 또는 공식 API가 있다면 아래 URL만 교체하세요.
       - 기대 JSON 형식: [{ "title":"...", "url":"https://...", "date":"2025-09-01" }, ...]
    */
    const DEVNOTE_API = './data/devnotes.json';

    /* ===== 라이트 스팟 ===== */
    document.querySelectorAll('.menu-item').forEach(el=>{
      el.addEventListener('pointermove', e=>{
        const r = el.getBoundingClientRect();
        const x = ((e.clientX - r.left) / r.width) * 100;
        const y = ((e.clientY - r.top)  / r.height) * 100;
        el.style.setProperty('--mx', x+'%');
        el.style.setProperty('--my', y+'%');
      });
    });

    /* ===== 라벨/빌드 ===== */
    const DAY_LABELS = { mon:'월요일', tue:'화요일', wed:'수요일', thu:'목요일', fri:'금요일', sat:'토요일', sun:'일요일' };
    const DEFAULT_BUILD = { mon:'a', tue:'a', wed:'van', thu:'a', fri:'a', sat:'a', sun:'a' };
    const BUILD_LABELS = {
      mon: { a:'기본 빌드', b:'대체 빌드' },
      tue: { a:'기본 빌드', b:'대체 빌드' },
      wed: { van:'바네사 빌드', bis:'비스킷 빌드' },
      thu: { a:'기본 빌드', b:'대체 빌드' },
      fri: { a:'기본 빌드', b:'대체 빌드' },
      sat: { a:'기본 빌드', b:'대체 빌드' },
      sun: { a:'기본 빌드', b:'대체 빌드' },
    };

    /* ===== 공통 스켈레톤 ===== */
    function skeleton(title){
      return `
        <h3 style="margin:0 0 10px">${title} · 세팅</h3>
        <ul style="margin:0 12px 14px 18px; line-height:1.7">
          <li><em style="color:#6b7280">작성 예정</em></li>
        </ul>
        <h3 style="margin:0 0 8px">${title} · 스킬 순서</h3>
        <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
        <ol style="margin:0 0 0 18px; line-height:1.7">
          <li><em style="color:#6b7280">작성 예정</em></li>
        </ol>
        <p style="margin:10px 0 0; color:#94a3b8; font-size:13px">※ 내용 보내주면 바로 채워넣을게요.</p>
      `;
    }

    /* ===== 요일별: 기본 빌드(A) 실제 내용 ===== */
    const MON_A = `
      <h3 style="margin:0 0 10px">세팅 · 영웅 배치</h3>
      <ul style="margin:0 12px 14px 18px; line-height:1.7">
        <li>배치: 보호진영 <b>후열 루리</b> / 전열 에반 · 비스킷 · 연희 · 리나</li>
        <li>루리: 치확 69% (+반지 10%), 치피 250%, 약공 40%</li>
        <li>비스킷: 복수자, 치확/치피 (권능)</li>
        <li>연희: 복수자, 치확/치피, 약공 10% (권능, 불사)</li>
      </ul>
      <h3 style="margin:0 0 8px">스킬 순서</h3>
      <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
      <ol style="margin:0 0 0 18px; line-height:1.7">
        <li>루리 아래</li><li>연희 아래</li><li>루리 위</li><li>비스킷 위</li>
        <li>비스킷 아래</li><li>리나 위</li><li>리나 아래</li><li>루리 위</li>
        <li>루리 아래</li><li>비스킷 위</li><li>연희 아래</li><li>에반 위</li>
        <li>루리 위</li><li>비스킷 아래</li><li>루리 아래</li><li>비스킷 위</li>
        <li>리나 위</li><li>연희 아래</li><li>루리 위</li><li>루리 아래</li>
      </ol>
    `;

    const TUE_A = `
      <h3 style="margin:0 0 10px">세팅 · 영웅 배치</h3>
      <ul style="margin:0 12px 14px 18px; line-height:1.7">
        <li>배치: 보호진영 <b>후열 루리</b> / 전열 클로에 · 비스킷 · 연희 · 리나</li>
        <li>루리: <b>속공 최저</b>, 치확 57%, 치피 252%</li>
        <li>연희 · 비스킷 · 복수자 (연희/비스킷 권능: 불사)</li>
      </ul>
      <h3 style="margin:0 0 8px">스킬 순서</h3>
      <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
      <ol style="margin:0 0 0 18px; line-height:1.7">
        <li>비스킷 위</li><li>클로에 위</li><li>비스킷 아래</li><li>리나 위</li>
        <li>루리 위</li><li>루리 아래</li><li>(턴 스킵)</li><li>리나 아래</li>
        <li>클로에 위</li><li>연희 아래</li><li>루리 위</li><li>루리 아래</li>
        <li>비스킷 위</li><li>비스킷 아래</li><li>리나 위</li><li>클로에 위</li>
        <li>리나 힐</li><li>루리 위</li><li>루리 아래</li><li>연희 아래</li>
      </ol>
    `;

    const WED_VAN = `
      <h3 style="margin:0 0 10px">세팅 · 영웅 배치</h3>
      <ul style="margin:0 12px 14px 18px; line-height:1.7">
        <li>배치: 보호진영 <b>후열 루리</b> / 전열 아리엘 · 바네사 · 연희 · 리나</li>
        <li>루리: 치확 69% (+반지 10%), 치피 240%, 약공 50% (+반지 8%)</li>
        <li>연희 · 아리엘 · 바네사 · 복수자: 치확 85~90%, 치피 190~200%</li>
        <li>아리엘: 부옵 생/방% 있으면 좋음 · 위 3캐릭 <b>권능 또는 불사 필수</b></li>
      </ul>
      <h3 style="margin:0 0 8px">스킬 순서</h3>
      <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
      <ol style="margin:0 0 0 18px; line-height:1.7">
        <li>아리엘 아래</li><li>바네사 위</li><li>리나 위</li><li>루리 위</li>
        <li>바네사 아래</li><li>루리 아래</li><li>연희 아래</li><li>아리엘 아래</li>
        <li>아리엘 위</li><li>루리 위</li><li>리나 아래</li><li>리나 위</li>
        <li>바네사 아래</li><li>루리 아래</li><li>루리 위</li><li>아리엘 아래</li>
        <li>아리엘 위</li><li>바네사 위</li><li>루리 위</li>
      </ol>
      <p style="margin:8px 0 0; color:#64748b; font-size:13px">* 마지막 턴은 살아있는 순서대로 스킬 바꿔도 무방</p>
    `;

    const THU_A = `
      <h3 style="margin:0 0 10px">세팅 · 영웅 배치</h3>
      <ul style="margin:0 12px 14px 18px; line-height:1.7">
        <li>배치: 보호진영 <b>후열 타카</b> / 전열 레이첼 · 비스킷 · 진 · 리나</li>
        <li>세팅: <b>비스킷 6초 미만</b> 시, <b>진 공격력 ≤ 타카 - 500</b> (최소 500 낮게)</li>
        <li>권능: 다다익선(진 권능 추천), 레이첼 <b>2초월</b> 기준</li>
      </ul>
      <h3 style="margin:0 0 8px">스킬 순서</h3>
      <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
      <ol style="margin:0 0 0 18px; line-height:1.7">
        <li>진 아래</li><li>진 위</li><li>레이첼 위</li><li>비스킷 아래</li>
        <li>리나 위</li><li>타카 아래</li><li>타카 위</li><li>레이첼 아래</li>
        <li>진 아래</li><li>진 위</li><li>레이첼 위</li>
        <li>타카 아래 <em>또는</em> 타카 위(먼저 도는 대로)</li>
        <li>비스킷 아래</li><li>레이첼 아래</li><li>리나 위</li><li>레이첼 위</li>
        <li>타카 위</li><li>진 위</li><li>타카 아래</li>
      </ol>
    `;

    const FRI_A = `
      <h3 style="margin:0 0 10px">세팅 · 영웅 배치</h3>
      <ul style="margin:0 12px 14px 18px; line-height:1.7">
        <li>배치: 보호진영 <b>후열 타카</b> / 전열 레이첼 · 지크 · 유이 · 비스킷</li>
        <li>참고: <b>비스킷 6초</b> 시 타카·레이첼 <em>밸진</em></li>
      </ul>
      <h3 style="margin:0 0 8px">스킬 순서</h3>
      <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
      <ol style="margin:0 0 0 18px; line-height:1.7">
        <li>타카 아래</li><li>타카 위</li><li>레이첼 위</li><li>비스킷 아래</li>
        <li>지크 아래</li><li>유이 아래</li><li>레이첼 아래</li><li>타카 아래</li>
        <li>타카 위</li><li>레이첼 위</li><li>비스킷 아래</li><li>레이첼 아래</li>
        <li>타카 아래</li><li>타카 위</li><li>지크 위</li><li>유이 아래</li>
        <li>레이첼 위</li><li><em>(유이 위)</em></li><li>타카 위</li><li>타카 아래</li>
      </ol>
    `;

    const SAT_A = `
      <h3 style="margin:0 0 10px">세팅 · 영웅 배치</h3>
      <ul style="margin:0 12px 14px 18px; line-height:1.7">
        <li>배치: 보호진영 <b>후열 타카</b> / 전열 풍연 · 리나 · 레이첼 · 비스킷</li>
        <li>세팅: <b>풍연 스킬</b>로 1, 2라운드 마무리 가능할 정도</li>
      </ul>
      <h3 style="margin:0 0 8px">스킬 순서</h3>
      <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
      <ol style="margin:0 0 0 18px; line-height:1.7">
        <li>풍연 아래</li><li>풍연 위</li><li>비스킷 아래</li><li>비스킷 위</li>
        <li>레이첼 위</li><li>리나 위</li><li>타카 아래</li><li>타카 위</li>
        <li>레이첼 아래</li><li>비스킷 위</li><li>레이첼 위</li><li>비스킷 아래</li>
        <li>타카 아래</li><li>타카 위</li><li>리나 위</li><li>비스킷 위</li>
        <li>레이첼 아래</li><li>레이첼 위</li><li>타카 위</li><li>타카 아래</li>
      </ol>
    `;

    const SUN_ANY = `
      <h3 style="margin:0 0 8px">데이터 수집중</h3>
      <p style="margin:0; line-height:1.7">일요일(크리스) 공성전 데이터 수집중입니다. 최신 공략이 정리되는 대로 업데이트할게요.</p>
    `;

    /* ===== 대체 빌드(B) ===== */
    const MON_B = skeleton('월요일(루디) · 대체 빌드');
    const TUE_B = skeleton('화요일(아일린) · 대체 빌드');
    const WED_BIS = `
      <h3 style="margin:0 0 10px">세팅 · 영웅 배치</h3>
      <ul style="margin:0 12px 14px 18px; line-height:1.7">
        <li>배치: 보호진영 <b>후열 루리</b> / 전열 아리엘 · 비스킷 · 연희 · 리나</li>
        <li>루리: 치확 69% (+반지 10%), 치피 240%, 약공 50% (+반지 8%)</li>
        <li>연희 · 아리엘 · 바네사 · 복수자: 치확 85~90%, 치피 190~200%</li>
        <li>아리엘: 부옵 생/방% 있으면 좋음 · 위 3캐릭 <b>권능 또는 불사 필수</b></li>
        <li>비스킷: 복수자 치확/치확 , 방/방</li>
      </ul>
      <h3 style="margin:0 0 8px">스킬 순서</h3>
      <hr style="border:none;border-top:1px dashed #cbd5e1; margin:6px 0 10px"/>
      <ol style="margin:0 0 0 18px; line-height:1.7">
        <li>비스킷 위</li>
        <li>아리엘 위</li>
        <li>아리엘 아래</li>
        <li>리나 위</li>
        <li>비스킷 아래</li>
        <li>루리 위</li>
        <li>루리 아래</li>
        <li>연희 아래</li>
        <li>아리엘 아래</li>
        <li>아리엘 위</li>
        <li>리나 아래</li>
        <li>루리 위</li>
        <li>루리 아래</li>
        <li>비스킷 아래</li>
        <li>아리엘 아래</li>
        <li>리나 위</li>
        <li>연희 아래</li>
        <li>루리 위</li>
        <li>루리 아래</li>
        <li>비스킷 위</li>
      </ol>
    `;

    const THU_B = skeleton('목요일(델론즈) · 대체 빌드');
    const FRI_B = skeleton('금요일(제이브) · 대체 빌드');
    const SAT_B = skeleton('토요일(스파이크) · 대체 빌드');
    const SUN_B = SUN_ANY;

    /* ===== 빌드별 콘텐츠 매핑 ===== */
    function getContent(day, build){
      switch(day){
        case 'mon': return build==='b' ? MON_B : MON_A;
        case 'tue': return build==='b' ? TUE_B : TUE_A;
        case 'wed': return build==='bis' ? WED_BIS : WED_VAN;
        case 'thu': return build==='b' ? THU_B : THU_A;
        case 'fri': return build==='b' ? FRI_B : FRI_A;
        case 'sat': return build==='b' ? SAT_B : SAT_A;
        case 'sun': return build==='b' ? SUN_B : SUN_ANY;
        default: return skeleton('요일');
      }
    }

    /* ===== 라우팅/전환 ===== */
    function show(id){
      document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      window.scrollTo({top:0, behavior:'instant'});
    }

    function buildSwitcher(day, build){
      const labels = BUILD_LABELS[day] || {};
      const keys = day==='wed' ? ['van','bis'] : ['a','b'];
      const chip = (k)=>`
        <a class="chip ${build===k?'active':''}" href="#/siege/${day}/${k}">
          ${labels[k] || k.toUpperCase()}
        </a>`;
      return `<div class="build-switch">${chip(keys[0])}${chip(keys[1])}</div>`;
    }

    const LAST_KEY = 'skre:last';
    function saveLast(day, build){
      try{ localStorage.setItem(LAST_KEY, JSON.stringify({day, build, t:Date.now()})); }catch(e){}
    }
    function loadLast(){
      try{ return JSON.parse(localStorage.getItem(LAST_KEY)); }catch(e){ return null; }
    }

    function route(){
      const hash = location.hash.replace(/^#\/?/, '');
      const parts = hash.split('/').filter(Boolean);

      if(parts.length === 0){ show('view-home'); return; }
      if(parts[0] === 'siege' && parts.length === 1){ show('view-siege'); return; }

      if(parts[0] === 'siege' && parts[1]){
        const day = parts[1]; // mon..sun
        const defaultBuild = DEFAULT_BUILD[day] || 'a';
        const build = parts[2] || defaultBuild;

        const buildName = (BUILD_LABELS[day] && BUILD_LABELS[day][build]) ? ` · ${BUILD_LABELS[day][build]}` : '';
        document.getElementById('day-title').textContent = (DAY_LABELS[day] || '요일') + buildName;

        const switcher = buildSwitcher(day, build);
        const body = getContent(day, build);
        const contentEl = document.getElementById('day-content');
        contentEl.innerHTML = switcher + body;

        // 접근성 포커스 + 타이틀
        document.title = `공성전 가이드 - ${DAY_LABELS[day] || '요일'}${buildName}`;
        contentEl.setAttribute('tabindex','-1');
        contentEl.focus({preventScroll:true});
        contentEl.addEventListener('blur', ()=>contentEl.removeAttribute('tabindex'), {once:true});

        // 마지막 위치 저장
        saveLast(day, build);

        show('view-day'); return;
      }

      show('view-home');
    }

    window.addEventListener('hashchange', route);
    window.addEventListener('load', ()=>{
      // 마지막 본 위치로 복귀 (해시가 없을 때만)
      if(!location.hash){
        const last = loadLast();
        if(last?.day){
          const b = last.build || 'a';
          location.hash = `#/siege/${last.day}/${b}`;
        }
      }
      route();
      renderDevNotes();
    });

    /* ===== 최신 개발자노트 렌더링 ===== */
    async function renderDevNotes(){
      const box = document.getElementById('devnote-list');
      try{
        const res = await fetch(DEVNOTE_API, { cache: 'no-store' });
        if(!res.ok) throw new Error('API 응답 오류: ' + res.status);
        const items = await res.json(); // [{title,url,date},...]

        if(!Array.isArray(items) || items.length === 0){
          box.textContent = '표시할 개발자노트가 없습니다.';
          return;
        }

        const top = items.slice(0,3);
        box.innerHTML = top.map(it => `
          <div class="devnote-row">
            <a class="devnote-title" href="${it.url}" target="_blank" rel="noopener">${escapeHTML(it.title || '제목 없음')}</a>
            <span class="devnote-date">${(it.date||'').slice(0,10)}</span>
          </div>
        `).join('') + `<div class="devnote-meta">자동 업데이트 · ${new Date().toLocaleString()}</div>`;
      }catch(err){
        console.error(err);
        box.textContent = '개발자노트를 불러오지 못했습니다.';
      }
    }

    function escapeHTML(s){
      return String(s)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#39;');
    }
  </script>
</body>
</html>
